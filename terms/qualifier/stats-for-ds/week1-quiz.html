<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statistics Quiz - Week 1 | IITM Notes</title>
    <meta name="description" content="Statistics for Data Science - Week 1 Qualifier-style practice quiz with persistence and keyboard shortcuts">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: { DEFAULT: '#3b82f6', dark: '#2563eb' },
                        dark: { primary: '#111827', secondary: '#1f2937', border: '#374151' },
                        text: { primary: '#f9fafb', secondary: '#d1d5db' }
                    },
                    fontFamily: {
                        sans: ['Inter', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <!-- Tailwind CDN mode: avoid @apply; styles handled by tw-bridge.js -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        .option.selected { border-color: #3b82f6 !important; background-color: rgba(59,130,246,0.2) !important; }
        .option.correct { border-color: #10b981 !important; background-color: rgba(16,185,129,0.2) !important; }
        .option.incorrect { border-color: #ef4444 !important; background-color: rgba(239,68,68,0.2) !important; }
        .explanation.show { display: block !important; }
        .hidden { display: none !important; }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <meta name="color-scheme" content="dark">
    <meta name="theme-color" content="#111827">
</head>
<body class="bg-dark-primary text-text-primary">
    <!-- Navigation -->
    <nav class="fixed top-0 w-full bg-dark-secondary/95 backdrop-blur-md shadow-xl border-b border-dark-border z-50">
        <div class="max-w-7xl mx-auto px-5 flex justify-between items-center h-16">
            <div class="text-2xl font-bold">
                <a href="../../../index.html" class="text-primary hover:text-blue-400 transition-colors">IITM Notes</a>
            </div>
            <div class="flex gap-6">
                <a href="../../../index.html" class="text-text-secondary hover:text-primary transition-colors">Home</a>
                <a href="../stats-for-ds.html" class="text-text-secondary hover:text-primary transition-colors">Back to Stats for DS</a>
                <a href="week1-notes.html" class="text-text-secondary hover:text-primary transition-colors">Week 1 Notes</a>
            </div>
        </div>
    </nav>

    <!-- Header -->
    <section id="overview" class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white pt-24 pb-12 shadow-[inset_0_-1px_0_rgba(255,255,255,0.1)]">
        <div class="max-w-6xl mx-auto px-5">
            <div class="text-sm mb-4 opacity-90">
                <a href="../../../index.html" class="hover:text-blue-200">Home</a> > <a href="../stats-for-ds.html" class="hover:text-blue-200">Stats for DS</a> > <span>Quiz</span>
            </div>
            <h1 class="text-5xl font-extrabold mb-3">Statistics for Data Science</h1>
            <p class="text-xl opacity-95">Week 1 Practice Quiz - 6 MCQs plus written prompts</p>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-8" id="progressStats">
                <div class="text-center p-4 bg-white/10 rounded-xl backdrop-blur-sm">
                    <div class="text-4xl font-extrabold" id="totalQuestions">6</div>
                    <div class="text-sm mt-1 opacity-90">Total Questions</div>
                </div>
                <div class="text-center p-4 bg-white/10 rounded-xl backdrop-blur-sm">
                    <div class="text-4xl font-extrabold" id="answeredCount">0</div>
                    <div class="text-sm mt-1 opacity-90">Answered</div>
                </div>
                <div class="text-center p-4 bg-white/10 rounded-xl backdrop-blur-sm">
                    <div class="text-4xl font-extrabold" id="correctCount">0</div>
                    <div class="text-sm mt-1 opacity-90">Correct</div>
                </div>
                <div class="text-center p-4 bg-white/10 rounded-xl backdrop-blur-sm">
                    <div class="text-4xl font-extrabold" id="scorePercent">0%</div>
                    <div class="text-sm mt-1 opacity-90">Score</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Quiz Container -->
    <section id="mcq-practice" class="bg-dark-primary py-12">
        <div class="max-w-6xl mx-auto px-5">
            <!-- Filters/Controls to match Maths quiz styling -->
            <div class="bg-dark-secondary/80 backdrop-blur-md sticky top-16 z-40 rounded-xl p-4 md:p-6 mb-6 border border-dark-border flex flex-wrap gap-3 md:gap-4 items-center shadow-lg">
                <label for="difficultyFilter" class="text-text-primary font-semibold">Filter by Difficulty:</label>
                <select id="difficultyFilter" class="px-3 md:px-4 py-2 bg-dark-primary border border-dark-border rounded-lg text-text-primary focus:border-primary focus:outline-none">
                    <option value="all">All Levels</option>
                    <option value="1">★ Easy</option>
                    <option value="2">★★ Medium</option>
                    <option value="3">★★★ Hard</option>
                </select>
                <button onclick="applyFilters()" class="px-4 md:px-6 py-2.5 md:py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-lg font-semibold transition-all hover:shadow-xl">Apply</button>
                <button onclick="resetQuiz()" class="px-4 md:px-6 py-2.5 md:py-3 bg-red-600/90 hover:bg-red-600 text-white rounded-lg font-semibold transition-all hover:shadow-xl" id="resetBtn">Reset</button>
            </div>

            <p class="text-text-secondary mb-6">Answer the interactive MCQs below. Your progress saves locally so you can revisit later.</p>

            <div id="quizContent" class="space-y-6"></div>
            <div id="loadingIndicator" class="flex justify-center items-center h-40">
                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div>
            </div>
            <div class="w-full bg-dark-secondary rounded-full h-3 overflow-hidden border border-dark-border mt-6">
                <div class="bg-gradient-to-r from-blue-600 to-indigo-600 h-full transition-all duration-300" id="overallProgress" style="width: 0%"></div>
            </div>
            <p id="progressText" class="text-text-secondary text-sm mt-2">0/6 questions completed</p>
        </div>
    </section>

    <!-- Additional Practice -->
    <section id="written-practice" class="bg-dark-secondary py-14 border-t border-dark-border">
        <div class="max-w-6xl mx-auto px-5 space-y-10">
            <div>
                <h2 class="text-3xl font-bold mb-3">Section A: Quick Concept Checks</h2>
                <p class="text-text-secondary mb-4">Use these short prompts for rapid recall before attempting the MCQs.</p>
                <ol class="list-decimal list-inside space-y-2 text-text-primary">
                    <li>State a one line definition of statistics.</li>
                    <li>Explain the difference between descriptive and inferential statistics.</li>
                    <li>Give one example each for a population and a sample.</li>
                    <li>Describe the difference between a case and a variable.</li>
                    <li>Distinguish cross sectional and time series data.</li>
                    <li>List the four scales of measurement.</li>
                </ol>
            </div>

            <div>
                <h2 class="text-3xl font-bold mb-3">Section C: Short Answer Practice</h2>
                <ol class="list-decimal list-inside space-y-2 text-text-primary">
                    <li>If nineteen students are surveyed for marks, what is the sample size?</li>
                    <li>Between any two rational numbers, how many rational numbers can exist?</li>
                    <li>Write the reduced form of 18/60.</li>
                    <li>Label each data source as structured or unstructured:
                        <ul class="list-disc list-inside mt-2 text-text-secondary">
                            <li>A shopkeeper note with sales written freely.</li>
                            <li>An Excel sheet with student marks.</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <div>
                <h2 class="text-3xl font-bold mb-3">Section D: Applied Dataset</h2>
                <p class="text-text-secondary mb-4">Use the mini dataset to practice identifying variables and drawing conclusions.</p>
                <div class="overflow-x-auto">
                    <table class="w-full text-left border border-dark-border rounded-lg overflow-hidden">
                        <thead class="bg-dark-primary">
                            <tr>
                                <th class="px-4 py-2 border-b border-dark-border">Player</th>
                                <th class="px-4 py-2 border-b border-dark-border">Matches</th>
                                <th class="px-4 py-2 border-b border-dark-border">Runs</th>
                                <th class="px-4 py-2 border-b border-dark-border">Batting average</th>
                                <th class="px-4 py-2 border-b border-dark-border">Wickets</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="px-4 py-2 border-b border-dark-border">Sachin</td>
                                <td class="px-4 py-2 border-b border-dark-border">463</td>
                                <td class="px-4 py-2 border-b border-dark-border">18426</td>
                                <td class="px-4 py-2 border-b border-dark-border">44.8</td>
                                <td class="px-4 py-2 border-b border-dark-border">154</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 border-b border-dark-border">Kohli</td>
                                <td class="px-4 py-2 border-b border-dark-border">254</td>
                                <td class="px-4 py-2 border-b border-dark-border">12040</td>
                                <td class="px-4 py-2 border-b border-dark-border">59.1</td>
                                <td class="px-4 py-2 border-b border-dark-border">4</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2">Dhoni</td>
                                <td class="px-4 py-2">350</td>
                                <td class="px-4 py-2">10773</td>
                                <td class="px-4 py-2">50.6</td>
                                <td class="px-4 py-2">1</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <ol class="list-decimal list-inside space-y-2 text-text-primary mt-4">
                    <li>Who has the highest batting average?</li>
                    <li>Identify one categorical variable in the table.</li>
                    <li>Would you classify this dataset as descriptive or inferential? Explain briefly.</li>
                </ol>
            </div>

            <div id="answer-key">
                <h2 class="text-3xl font-bold mb-3">Answer Key</h2>
                <div class="grid md:grid-cols-2 gap-6 text-text-primary">
                    <div>
                        <h3 class="text-xl font-semibold mb-2">MCQ Solutions</h3>
                        <ul class="space-y-1 text-text-secondary">
                            <li>Q1: Option B</li>
                            <li>Q2: Option C</li>
                            <li>Q3: Option A</li>
                            <li>Q4: Option C</li>
                            <li>Q5: Option D</li>
                            <li>Q6: Option B</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-2">Written prompts</h3>
                        <ul class="space-y-1 text-text-secondary">
                            <li>Section A: Refer to Week 1 notes for model explanations.</li>
                            <li>Section C: Answers - (1) 19, (2) Infinitely many, (3) 3/10, (4) Shopkeeper note is unstructured, Excel sheet is structured.</li>
                            <li>Section D: Highest average is Kohli, categorical variable is Player, dataset serves descriptive insight.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!-- All Questions Review -->
    <section id="all-questions" class="bg-dark-primary pb-16 border-t border-dark-border">
        <div class="max-w-6xl mx-auto px-5">
            <h2 class="text-3xl font-bold mb-4">Review Every Question</h2>
            <p class="text-text-secondary mb-6">Prefer a single scrolling list? Use this section to skim all six MCQs along with their options.</p>
            <ol class="space-y-6 text-text-primary text-lg">
                <li>
                    <strong>What is the primary purpose of descriptive statistics?</strong>
                    <ul class="list-disc list-inside text-text-secondary text-base mt-2">
                        <li>To make predictions about future data</li>
                        <li><strong class="text-primary">To summarise and describe data characteristics</strong></li>
                        <li>To test hypotheses</li>
                        <li>To establish causation</li>
                    </ul>
                </li>
                <li>
                    <strong>Which of the following is an example of discrete quantitative data?</strong>
                    <ul class="list-disc list-inside text-text-secondary text-base mt-2">
                        <li>Height of students</li>
                        <li>Weight of objects</li>
                        <li><strong class="text-primary">Number of books in a library</strong></li>
                        <li>Temperature readings</li>
                    </ul>
                </li>
                <li>
                    <strong>What is the median of the dataset: 3, 7, 2, 9, 5?</strong>
                    <ul class="list-disc list-inside text-text-secondary text-base mt-2">
                        <li><strong class="text-primary">5</strong></li>
                        <li>7</li>
                        <li>5.2</li>
                        <li>6</li>
                    </ul>
                </li>
                <li>
                    <strong>Which measure of central tendency is most affected by outliers?</strong>
                    <ul class="list-disc list-inside text-text-secondary text-base mt-2">
                        <li>Mode</li>
                        <li>Median</li>
                        <li><strong class="text-primary">Mean</strong></li>
                        <li>All are equally affected</li>
                    </ul>
                </li>
                <li>
                    <strong>What type of data is "customer satisfaction rating" (Poor, Fair, Good, Excellent)?</strong>
                    <ul class="list-disc list-inside text-text-secondary text-base mt-2">
                        <li>Nominal</li>
                        <li><strong class="text-primary">Ordinal</strong></li>
                        <li>Discrete quantitative</li>
                        <li>Continuous quantitative</li>
                    </ul>
                </li>
                <li>
                    <strong>The standard deviation is:</strong>
                    <ul class="list-disc list-inside text-text-secondary text-base mt-2">
                        <li>The square of variance</li>
                        <li><strong class="text-primary">The square root of variance</strong></li>
                        <li>The same as variance</li>
                        <li>Always larger than variance</li>
                    </ul>
                </li>
            </ol>
        </div>
    </section>

    <div id="resultsModal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50">
        <div class="bg-dark-secondary rounded-2xl border border-dark-border max-w-xl w-full mx-5 shadow-2xl">
            <div class="flex justify-between items-center px-6 py-4 border-b border-dark-border">
                <h3 class="text-2xl font-bold">MCQ Score</h3>
                <button onclick="closeResults()" class="text-text-secondary hover:text-white transition-colors text-2xl">&times;</button>
            </div>
            <div class="p-6 space-y-4" id="resultsBody"></div>
        </div>
    </div>

    <script>
        const quizData = [
            { id: 1, question: "Which branch of statistics is used to summarize and describe data?", options: [
                "Inferential statistics",
                "Descriptive statistics",
                "Probability theory",
                "Regression analysis"
            ], correctAnswer: 1, explanation: "Descriptive statistics summarizes the features of a dataset using tables, charts, and summary measures.", difficulty: 1 },
            { id: 2, question: "The set of all students in IIT Madras is a:", options: [
                "Sample",
                "Variable",
                "Population",
                "Case"
            ], correctAnswer: 2, explanation: "A population is the complete set of units under study. Here that is every IIT Madras student.", difficulty: 1 },
            { id: 3, question: "Blood group of a student is measured on which scale?", options: [
                "Nominal",
                "Ordinal",
                "Interval",
                "Ratio"
            ], correctAnswer: 0, explanation: "Blood groups are categories without an ordering, so they lie on the nominal scale.", difficulty: 2 },
            { id: 4, question: "Temperature in Celsius is an example of which scale?", options: [
                "Nominal",
                "Ordinal",
                "Interval",
                "Ratio"
            ], correctAnswer: 2, explanation: "Celsius measurements have equal spacing but no true zero, which defines the interval scale.", difficulty: 2 },
            { id: 5, question: "Height of a student in centimetres is recorded on which scale?", options: [
                "Nominal",
                "Ordinal",
                "Interval",
                "Ratio"
            ], correctAnswer: 3, explanation: "Height has a true zero and ratios are meaningful, so it is on the ratio scale.", difficulty: 2 },
            { id: 6, question: "Daily rainfall in Chennai for July 2020 is what type of data?", options: [
                "Cross sectional",
                "Time series"
            ], correctAnswer: 1, explanation: "Measurements taken sequentially over time for the same location form a time series.", difficulty: 1 }
        ];

        let userAnswers = {};

        function initQuiz() {
            try {
                const saved = localStorage.getItem('stats_week1_quiz_answers');
                if (saved) userAnswers = JSON.parse(saved);
            } catch {}
            renderQuestions();
            updateStats();
            updateOverallProgress();
            if (window.MathJax) MathJax.typesetPromise();
            window.addEventListener('keydown', (e) => {
                const n = parseInt(e.key, 10);
                if (!isNaN(n) && n >= 1 && n <= 9) {
                    const cards = Array.from(document.querySelectorAll('[id^="explanation-"]')).map(el => parseInt(el.id.replace('explanation-','')));
                    if (cards.length) {
                        const qId = Math.min(...cards);
                        const opt = document.querySelector(`[data-question="${qId}"][data-option="${n-1}"]`);
                        if (opt) { e.preventDefault(); opt.click(); }
                    }
                }
            });
        }

        function renderQuestions() {
            const container = document.getElementById('quizContent');
            const loading = document.getElementById('loadingIndicator');
            if (loading) loading.classList.add('hidden');
            container.innerHTML = '';

            quizData.forEach(q => {
                const card = document.createElement('div');
                card.className = 'bg-dark-secondary border border-dark-border rounded-2xl shadow-lg overflow-hidden question-card';
                card.setAttribute('data-active-question', q.id);

                const header = document.createElement('div');
                header.className = 'px-6 py-4 border-b border-dark-border flex items-center justify-between';
                header.innerHTML = `
                    <div>
                        <p class="text-sm text-text-secondary uppercase tracking-wide">Question ${q.id}</p>
                        <h3 class="text-2xl font-semibold text-text-primary">${q.question}</h3>
                    </div>
                    <button class="text-sm text-text-secondary hover:text-primary transition-colors" onclick="resetQuestion(${q.id})">Reset</button>
                `;

                const body = document.createElement('div');
                body.className = 'px-6 py-4 space-y-3';

                q.options.forEach((option, index) => {
                    const optionBtn = document.createElement('button');
                    optionBtn.className = 'w-full text-left p-4 rounded-xl border border-dark-border bg-dark-primary/60 hover:border-primary transition-all option';
                    optionBtn.setAttribute('data-question', q.id);
                    optionBtn.setAttribute('data-option', index);
                    optionBtn.innerHTML = `
                        <div class="flex items-start gap-3">
                            <span class="w-8 h-8 flex items-center justify-center rounded-full border border-dark-border text-text-secondary font-semibold">${index + 1}</span>
                            <span class="text-lg">${option}</span>
                        </div>
                    `;
                    optionBtn.addEventListener('click', () => selectOption(q.id, index));

                    if (userAnswers[q.id] && userAnswers[q.id].selected === index) {
                        optionBtn.classList.add('selected');
                        if (userAnswers[q.id].correct) optionBtn.classList.add('correct');
                        else optionBtn.classList.add('incorrect');
                    }

                    body.appendChild(optionBtn);
                });

                const explanation = document.createElement('div');
                explanation.id = `explanation-${q.id}`;
                explanation.className = 'explanation mt-4 p-6 bg-gradient-to-br from-emerald-600/10 to-blue-600/10 rounded-xl border border-emerald-500/30 hidden';
                explanation.innerHTML = `
                    <h4 class="text-xl font-bold text-emerald-400 mb-3 flex items-center gap-2"><span>💡</span> Explanation:</h4>
                    <p class="text-text-primary text-base leading-relaxed">${q.explanation}</p>
                `;
                body.appendChild(explanation);

                card.appendChild(header);
                card.appendChild(body);
                container.appendChild(card);
            });

            restoreSelections();
        }

        function selectOption(questionId, optionIndex) {
            const question = quizData.find(q => q.id === questionId);
            if (!question) return;

            const correct = question.correctAnswer === optionIndex;
            userAnswers[questionId] = { selected: optionIndex, correct };

            try {
                localStorage.setItem('stats_week1_quiz_answers', JSON.stringify(userAnswers));
            } catch {}

            const options = document.querySelectorAll(`[data-question="${questionId}"]`);
            options.forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
            });

            options.forEach(opt => {
                const idx = parseInt(opt.getAttribute('data-option'), 10);
                if (idx === optionIndex) {
                    opt.classList.add('selected');
                    opt.classList.add(correct ? 'correct' : 'incorrect');
                }
            });

            showFeedback(questionId);
            updateStats();
            updateOverallProgress();
        }

        function showFeedback(questionId) {
            const explanation = document.getElementById(`explanation-${questionId}`);
            if (explanation) explanation.classList.remove('hidden');
        }

        function resetQuestion(questionId) {
            delete userAnswers[questionId];
            try {
                localStorage.setItem('stats_week1_quiz_answers', JSON.stringify(userAnswers));
            } catch {}
            const options = document.querySelectorAll(`[data-question="${questionId}"]`);
            options.forEach(opt => opt.classList.remove('selected', 'correct', 'incorrect'));
            const explanation = document.getElementById(`explanation-${questionId}`);
            if (explanation) explanation.classList.add('hidden');
            updateStats();
            updateOverallProgress();
        }

        function restoreSelections() {
            Object.entries(userAnswers).forEach(([id, answer]) => {
                const qId = parseInt(id, 10);
                const opt = document.querySelector(`[data-question="${qId}"][data-option="${answer.selected}"]`);
                if (opt) {
                    opt.classList.add('selected');
                    opt.classList.add(answer.correct ? 'correct' : 'incorrect');
                    showFeedback(qId);
                }
            });
        }

        function updateStats() {
            const answered = Object.keys(userAnswers).length;
            const correct = Object.values(userAnswers).filter(a => a.correct).length;
            const total = quizData.length;
            const score = total > 0 ? Math.round((correct / total) * 100) : 0;
            document.getElementById('totalQuestions').textContent = total;
            document.getElementById('answeredCount').textContent = answered;
            document.getElementById('correctCount').textContent = correct;
            document.getElementById('scorePercent').textContent = score + '%';
        }

        function updateOverallProgress() {
            const total = quizData.length;
            const answered = Object.keys(userAnswers).length;
            const percent = total > 0 ? (answered / total) * 100 : 0;
            document.getElementById('overallProgress').style.width = percent + '%';
            document.getElementById('progressText').textContent = `${answered}/${total} questions completed`;
        }

        function resetQuiz() {
            if (!confirm('Reset your answers?')) return;
            userAnswers = {};
            try { localStorage.removeItem('stats_week1_quiz_answers'); } catch {}
            renderQuestions();
            updateStats();
            updateOverallProgress();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function showResults() {
            const total = quizData.length;
            const answered = Object.keys(userAnswers).length;
            const correct = Object.values(userAnswers).filter(a => a.correct).length;
            const score = total > 0 ? Math.round((correct / total) * 100) : 0;
            const body = document.getElementById('resultsBody');
            body.innerHTML = `
                <div class="text-center">
                    <h3 class="text-6xl font-extrabold mb-4 ${score >= 70 ? 'text-emerald-400' : 'text-red-400'}">${score}%</h3>
                    <p class="text-text-primary text-xl mb-2">You answered <strong class="text-primary">${correct}</strong> out of <strong class="text-primary">${total}</strong> MCQs correctly.</p>
                    <p class="text-text-secondary mb-4">Completed: ${answered}/${total}</p>
                    ${score >= 70 ? '<p class="text-emerald-400 text-lg font-bold">Nice work! You are quiz ready.</p>' : '<p class="text-red-400 text-lg">Review the notes and try again.</p>'}
                </div>
            `;
            document.getElementById('resultsModal').classList.remove('hidden');
        }

        function closeResults() {
            document.getElementById('resultsModal').classList.add('hidden');
        }

        function applyFilters() {
            const diff = document.getElementById('difficultyFilter').value;
            // In this small quiz we simply hide/show by difficulty after render
            // Re-render to rebuild cards, then hide those not matching
            renderQuestions();
            if (diff !== 'all') {
                const want = parseInt(diff, 10);
                quizData.forEach(q => {
                    if (q.difficulty !== want) {
                        const card = document.querySelector(`[data-active-question="${q.id}"]`);
                        if (card) card.classList.add('hidden');
                    }
                });
            }
            updateStats();
            updateOverallProgress();
            if (window.MathJax) MathJax.typesetPromise();
        }

        if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', initQuiz); else initQuiz();
    </script>

    <!-- Floating Results button -->
    <div class="fixed bottom-6 right-5 z-40">
        <button onclick="showResults()" class="px-5 py-3 rounded-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold shadow-xl hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500/50">Show Results</button>
    </div>

    <script src="../../../js/tw-bridge.js"></script>
</body>
</html>




